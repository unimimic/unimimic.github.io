"use strict";(self.webpackChunkgatsby_blog=self.webpackChunkgatsby_blog||[]).push([[643],{6947:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var l=n(8453),a=n(6540);function r(e){const t=Object.assign({ul:"ul",li:"li",h2:"h2",blockquote:"blockquote",p:"p",a:"a",ol:"ol",pre:"pre",code:"code"},(0,l.R)(),e.components);return a.createElement(a.Fragment,null,a.createElement(t.ul,null,"\n",a.createElement(t.li,null,"在 ubuntu 環境進行測試"),"\n",a.createElement(t.li,null,"以下主要有三大部分，有安裝Docker、安裝Nvidia Driver、安裝NVIDIA Container Toolkit。其中NVIDIA Container Toolkit 有兩種方法，挑其中一種進行安裝即可。"),"\n"),"\n",a.createElement(t.h2,null,"安裝Docker"),"\n",a.createElement(t.blockquote,null,"\n",a.createElement(t.p,null,"如有需要更詳細的安裝，可",a.createElement(t.a,{href:"https://docs.docker.com/engine/install/ubuntu/"},"參考官方教學"),"。"),"\n"),"\n",a.createElement(t.ol,null,"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"移除舊版Docker (可選)"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"sudo apt-get remove docker docker-engine docker.io containerd runc\n")),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"更新apt安裝包以及所需的相關套件"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"sudo apt-get update\n\nsudo apt-get install \\\n    ca-certificates \\\n    curl \\\n    gnupg \\\n    lsb-release\n")),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"加入docker的官方GPG Key"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"sudo mkdir -m 0755 -p /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\n")),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"設置repository"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},'echo \\\n  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\n  $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n')),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"更新apt安裝包"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"sudo apt-get update\n")),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"安裝docker"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin\n")),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"確認是否安裝成功"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"sudo docker run hello-world\n")),"\n"),"\n"),"\n",a.createElement(t.h2,null,"安裝Nvidia Driver"),"\n",a.createElement(t.ol,null,"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"移除舊的Nvidia Driver"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"sudo apt-get purge nvidia*\nsudo apt-get autoremove\nsudo apt-get autoclean\nsudo rm -rf /usr/local/cuda*\n")),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"查詢安裝版本，",a.createElement(t.a,{href:"https://www.nvidia.com.tw/Download/index.aspx?lang=tw"},"點此連結到官網查詢"),"。"),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"安裝Nvidia Driver"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"sudo apt update\nsudo apt install nvidia-utils-<版號前三碼>\nsudo apt install nvidia-driver-<版號前三碼>\n")),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"重啟電腦"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"sudo reboot\n")),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"確認安裝成功"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"nvidia-smi\n")),"\n"),"\n"),"\n",a.createElement(t.h2,null,"安裝NVIDIA Container Toolkit"),"\n",a.createElement(t.blockquote,null,"\n",a.createElement(t.p,null,"如有需要更詳細的安裝，可",a.createElement(t.a,{href:"https://docs.nvidia.com/datacenter/cloud-native/container-toolkit/install-guide.html"},"參考官方教學"),"。"),"\n"),"\n",a.createElement(t.ol,null,"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"設定repo以及GPG key"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"distribution=$(. /etc/os-release;echo $ID$VERSION_ID) \\\n      && curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey | sudo gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg \\\n      && curl -s -L https://nvidia.github.io/libnvidia-container/$distribution/libnvidia-container.list | \\\n            sed 's#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g' | \\\n            sudo tee /etc/apt/sources.list.d/nvidia-container-toolkit.list\n")),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"安裝 nvidia-container-toolkit"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"sudo apt-get update\nsudo apt-get install -y nvidia-container-toolkit\n")),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"配置 Docker daemon"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"sudo nvidia-ctk runtime configure --runtime=docker\n")),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"重啟 Docker"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"sudo systemctl restart docker\n")),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"測試是否安裝成功"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"sudo docker run --rm --runtime=nvidia --gpus all nvidia/cuda:11.6.2-base-ubuntu20.04 nvidia-smi\n")),"\n"),"\n"),"\n",a.createElement(t.h2,null,"安裝NVIDIA Container Toolkit (nvidia-docker2)"),"\n",a.createElement(t.ol,null,"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"設定repo以及GPG key"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"distribution=$(. /etc/os-release;echo $ID$VERSION_ID) \\\n   && curl -s -L https://nvidia.github.io/nvidia-docker/gpgkey | sudo apt-key add - \\\n   && curl -s -L https://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list | sudo tee /etc/apt/sources.list.d/nvidia-docker.list\n")),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"安裝 nvidia-docker2"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"sudo apt-get update\nsudo apt-get install -y nvidia-docker2\n")),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"重啟 Docker"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"sudo systemctl restart docker\n")),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"測試是否安裝成功"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"sudo docker run --rm --gpus all nvidia/cuda:11.6.2-base-ubuntu20.04 nvidia-smi\n")),"\n"),"\n"))}var c=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,l.R)(),e.components);return t?a.createElement(t,e,a.createElement(r,e)):r(e)},s=n(6543),o=n(454),i=n(9704);const u=e=>{let{data:t,children:n}=e;const{title:r,date:c}=t.allMdx.nodes[0].frontmatter;return a.createElement(s.A,{pageTitle:r},a.createElement(o.Zp,null,a.createElement(o.aR,null,a.createElement(o.ZB,{className:"text-2xl text-center"},r),a.createElement(o.BT,null,c)),a.createElement(o.Wu,null,a.createElement(l.x,{components:i.d},n))))};function m(e){return a.createElement(u,e,a.createElement(c,e))}},9704:function(e,t,n){n.d(t,{d:function(){return a}});var l=n(6540);const a={h1:e=>l.createElement("h1",Object.assign({className:"text-4xl font-semibold mt-8 mb-4 pb-2 border-gray-200 dark:border-gray-700"},e)),h2:e=>l.createElement("h2",Object.assign({className:"text-3xl font-semibold mt-8 mb-4 pb-2 border-gray-200 dark:border-gray-700"},e)),h3:e=>l.createElement("h3",Object.assign({className:"text-2xl font-semibold mt-6 mb-3"},e)),h4:e=>l.createElement("h4",Object.assign({className:"text-xl font-semibold mt-5 mb-2"},e)),h5:e=>l.createElement("h5",Object.assign({className:"text-lg font-semibold mt-4 mb-2"},e)),h6:e=>l.createElement("h6",Object.assign({className:"text-base font-semibold mt-4 mb-2"},e)),p:e=>l.createElement("p",Object.assign({className:"my-4 text-base leading-6 text-gray-800 dark:text-gray-300"},e)),ul:e=>l.createElement("ul",Object.assign({className:"list-disc pl-8 my-4 text-gray-800 dark:text-gray-300"},e)),ol:e=>l.createElement("ol",Object.assign({className:"list-decimal pl-8 my-4 text-gray-800 dark:text-gray-300"},e)),li:e=>l.createElement("li",Object.assign({className:"my-1"},e)),a:e=>l.createElement("a",Object.assign({className:"text-blue-600 hover:underline dark:text-blue-400"},e)),blockquote:e=>l.createElement("blockquote",Object.assign({className:"border-l-4 border-gray-300 dark:border-gray-600 pl-4 text-gray-600 dark:text-gray-400 my-4"},e)),code:e=>l.createElement("code",Object.assign({className:"bg-gray-100 dark:bg-gray-800 rounded px-1 py-0.5 font-mono text-sm text-gray-800 dark:text-gray-200"},e)),pre:e=>l.createElement("pre",Object.assign({style:{overflowX:"auto"},className:"bg-gray-100 dark:bg-gray-800 rounded-md p-4 my-4 overflow-x-auto text-sm font-mono text-gray-800 dark:text-gray-200"},e)),table:e=>l.createElement("div",{className:"overflow-x-auto my-4"},l.createElement("table",Object.assign({className:"min-w-full border-collapse border border-gray-300 dark:border-gray-700"},e))),th:e=>l.createElement("th",Object.assign({className:"border border-gray-300 dark:border-gray-700 px-4 py-2 bg-gray-100 dark:bg-gray-800 font-semibold text-left"},e)),td:e=>l.createElement("td",Object.assign({className:"border border-gray-300 dark:border-gray-700 px-4 py-2"},e)),hr:e=>l.createElement("hr",Object.assign({className:"my-8 border-t border-gray-300 dark:border-gray-700"},e)),img:e=>l.createElement("img",Object.assign({className:"max-w-full h-auto rounded-md my-4"},e,{alt:e.alt||""}))}},8453:function(e,t,n){n.d(t,{R:function(){return c},x:function(){return s}});var l=n(6540);const a={},r=l.createContext(a);function c(e){const t=l.useContext(r);return l.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),l.createElement(r.Provider,{value:t},e.children)}}}]);
//# sourceMappingURL=component---src-templates-blog-post-tsx-content-file-path-content-posts-docker-gpu-index-md-ea1e5cf7b7fc1ee657d7.js.map